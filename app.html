<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Install SignIt Web Clip</title>
</head>
<body>
    <h1>Install SignIt Web Clip</h1>
    <button id="installButton">Install SignIt Web Clip</button>

    <script>
        function generateUUID() {
            // Generate a random UUID
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0,
                    v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        document.getElementById('installButton').addEventListener('click', function() {
            // Generate UUIDs
            const payloadUUID = generateUUID();
            const profileUUID = generateUUID();

            // Create the plist content
            const plistContent = `<?xml version="1.0" encoding="UTF-8"?>
            <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
            <plist version="1.0">
            <dict>
                <key>PayloadContent</key>
                <array>
                    <dict>
                        <key>FullScreen</key>
                        <true/>
                        <key>IgnoreManifestScope</key>
                        <false/>
                        <key>IsRemovable</key>
                        <true/>
                        <key>Label</key>
                        <string>SignIt â€¢ IPA Signer</string>
                        <key>Precomposed</key>
                        <false/>
                        <key>URL</key>
                        <string>https://usesignit.netlify.app</string>
                        <key>PayloadIdentifier</key>
                        <string>com.signit.webclip</string>
                        <key>PayloadType</key>
                        <string>com.apple.webClip.managed</string>
                        <key>PayloadUUID</key>
                        <string>${payloadUUID}</string>
                        <key>PayloadVersion</key>
                        <integer>1</integer>
                    </dict>
                </array>
                <key>PayloadDisplayName</key>
                <string>SignIt Web Clip</string>
                <key>PayloadIdentifier</key>
                <string>com.example.signitprofile</string>
                <key>PayloadType</key>
                <string>Configuration</string>
                <key>PayloadUUID</key>
                <string>${profileUUID}</string>
                <key>PayloadVersion</key>
                <integer>1</integer>
                <key>PayloadDescription</key>
                <string>Use this configuration profile to install the official SignIt iOS app.</string>
            </dict>
            </plist>`;

            // Create a Blob and a download link
            const blob = new Blob([plistContent], { type: 'application/x-plist' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'signit_webclip.plist';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });
    </script>
</body>
</html>
